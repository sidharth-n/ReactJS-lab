import{j as e,r as s,u as L,a as O,b as R,V as E,A as I,S as M,c as P,m as z,C as B,d as F,H as $,e as U,R as _}from"./vendor-471540b3.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function a(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(t){if(t.ep)return;t.ep=!0;const o=a(t);fetch(t.href,o)}})();function q(){return e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-send",children:[e.jsx("line",{x1:"22",x2:"11",y1:"2",y2:"13"}),e.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]})}function J(){return e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-x",children:[e.jsx("line",{x1:"18",x2:"6",y1:"6",y2:"18"}),e.jsx("line",{x1:"6",x2:"18",y1:"6",y2:"18"})]})}function K({text:i,onAudioEnd:n,onAudioStart:a}){const[r,t]=s.useState(null);s.useEffect(()=>{i&&o(i)},[i]);const o=async c=>{const m=await u(),g=`
  <speak version='1.0' xml:lang='en-US'>
    <voice xml:lang='en-US' xml:gender='Male' name='ml-IN-MidhunNeural'>
      <prosody pitch='+3st'>
        ${c}
      </prosody>
    </voice>
  </speak>
`,l=await fetch("https://centralindia.tts.speech.microsoft.com/cognitiveservices/v1",{method:"POST",headers:{Authorization:`Bearer ${m}`,"Content-Type":"application/ssml+xml","X-Microsoft-OutputFormat":"audio-16khz-64kbitrate-mono-mp3","User-Agent":"YOUR_USER_AGENT"},body:g});if(!l.ok)throw new Error(`Failed to fetch speech with status ${l.status}`);const h=await l.blob(),d=URL.createObjectURL(h);t(d)},u=async()=>{const c=await fetch("https://centralindia.api.cognitive.microsoft.com/sts/v1.0/issuetoken",{method:"POST",headers:{"Ocp-Apim-Subscription-Key":"ecb090fd14764f6fb71ae7f9f73e7db5"}});if(!c.ok)throw new Error(`Failed to fetch access token with status ${c.status}`);return await c.text()};return e.jsx("div",{className:"Audio",children:r&&e.jsx("audio",{className:"hidden",src:r,controls:!0,autoPlay:!0,onEnded:n,onPlay:a})})}function V({animationName:i}){const n=L("./check.glb");n.scene.scale.set(1,1,1),n.scene.position.set(0,-.5,3.5),n.scene.rotation.set(.3,0,0);const a=O(n.animations,n.scene);return console.log(a),s.useEffect(()=>{const r=a.actions[i];return r.reset().fadeIn(.5).play(),()=>{r.fadeOut(.5)}},[i]),e.jsxs(e.Fragment,{children:[e.jsx("ambientLight",{intensity:.5}),e.jsx("pointLight",{position:[10,10,10],intensity:1}),e.jsx("spotLight",{position:[0,10,10],intensity:1}),e.jsx("primitive",{object:n.scene,receiveShadow:!0})]})}async function v(i,n){const t=`https://api.cognitive.microsofttranslator.com/translate?api-version=3.0&to=${n}`,o={method:"POST",headers:{"Content-Type":"application/json","Ocp-Apim-Subscription-Key":"a5a16cded06640bfb81cc2482b4a71b3","Ocp-Apim-Subscription-Region":"centralindia"},body:JSON.stringify([{Text:i}])};return(await(await fetch(t,o)).json())[0].translations[0].text}const D=()=>{const{scene:i}=R(),n=s.useMemo(()=>{const a=document.createElement("video");return a.src="/hud.mp4",a.loop=!0,a.muted=!0,a.play(),a},[]);return s.useEffect(()=>{const a=new E(n);i.background=a},[i,n]),null};function Q({onTranscription:i,pause:n}){const[a,r]=s.useState(""),[t,o]=s.useState(!1),[u,c]=s.useState(null);s.useEffect(()=>{const l=I.fromDefaultMicrophoneInput(),h=M.fromSubscription("ecb090fd14764f6fb71ae7f9f73e7db5","centralindia");h.speechRecognitionLanguage="ml-IN";const d=new P(h,l);d.recognizing=(x,f)=>{r(f.result.text),i(f.result.text)},c(d),n&&d.stopContinuousRecognitionAsync()},[i]);const m=()=>{navigator.mediaDevices.getUserMedia({audio:!0}).then(l=>{u.startContinuousRecognitionAsync(),o(!0)}).catch(l=>{console.error(l)})},g=()=>{u.stopContinuousRecognitionAsync(),o(!1)};return e.jsx("div",{className:"flex flex-col items-center mb-6",children:e.jsx("div",{className:"space-x-4",children:t?e.jsx("div",{className:"p-4 bg-red-500 flex align-center rounded-full",children:e.jsx("svg",{onClick:g,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-octagon",children:e.jsx("polygon",{points:"7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"})})}):e.jsx("div",{className:"p-4 bg-green-500 flex align-center rounded-full",children:e.jsxs("svg",{onClick:m,disabled:t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-mic",children:[e.jsx("path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"}),e.jsx("path",{d:"M19 10v2a7 7 0 0 1-14 0v-2"}),e.jsx("line",{x1:"12",x2:"12",y1:"19",y2:"22"})]})})})})}function Y(){const{progress:i}=F();return e.jsxs($,{center:!0,children:[e.jsx("div",{class:"loader ease-linear rounded-full border-8 border-t-8 border-gray-200 h-12 w-12 mb-2"}),e.jsxs("h2",{class:"text-center text-white text-l font-semibold",children:[i.toFixed(0)," % loading..."]})]})}function G(){s.useState(""),s.useState({});const[i,n]=s.useState(!1),[a,r]=s.useState(!0);s.useRef(null);const[t,o]=s.useState(""),[u,c]=s.useState("Freeze"),m=["talk_Armature.001"],g=["talk_Armature.001"],[l,h]=s.useState(!1),[d,x]=s.useState(!1),[f,y]=s.useState("");s.useState(!1);function w(p){const b=Math.floor(Math.random()*p.length);return p[b]}s.useEffect(()=>{c(d?"talk_Armature.001":w(l?g:m))},[l,d]);const k=p=>{y(p.target.value)},S=p=>{y(p)},A=async p=>{p.preventDefault(),n(!0),r(!1),x(!0);const C=`prtend that you are android kunjappan 10.25. i will give your background "there was actually a film named android kunjappan in malayalam released in 2019.the main role in the film is played by a robot named android kunjappan version 5.25(you). you were made in japan and bought to kerala by a malayali engineer called subramanian who is wokring in yur company as an robotics engineer. you lived with his dad in a house in kerala." thats the backround. now you are playing an upgraded version of it which is version 10.25 YOu need not say about you every time unless asked. keep this profile and answer the questions "${await v(f,"en")}"`,j=(await(await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer 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"},body:JSON.stringify({model:"gpt-3.5-turbo",messages:[{role:"user",content:C}],temperature:.7})})).json()).choices[0].message.content;console.log(j);const T=await v(j,"ml");n(!1),o(T)},N=()=>{y("")};return s.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]),e.jsxs("div",{className:"flex flex-col h-screen bg-black text-white font-sans",children:[e.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"}),e.jsxs("main",{className:"flex-1 overflow-auto p-0 mt-2 mb-24",children:[e.jsx("div",{className:"quote-container flex justify-center items-center",children:i?e.jsx("div",{className:"text-center fixed top-2 font-bold bg-black p-2 rounded",style:{zIndex:9999},children:e.jsx(z,{sequence:["kunjappan is thinking...",500,"please wait...",500,"this is a test version only...",500],wrapper:"span",cursor:!0,repeat:1/0,style:{fontSize:"1em",display:"inline-block"}})}):t&&e.jsx(K,{text:t,onAudioStart:()=>{h(!0),x(!1)},onAudioEnd:()=>h(!1)})}),e.jsxs(B,{className:"w-full h-full bg-gray-1000",style:{},children:[" ",e.jsx(D,{}),e.jsx(s.Suspense,{fallback:e.jsx(Y,{}),children:e.jsx(V,{animationName:u})})]})]}),e.jsxs("footer",{className:"fixed bottom-0 w-full p-4",children:[e.jsx(Q,{onTranscription:S,pause:l}),e.jsxs("form",{onSubmit:A,className:"flex items-center",children:[e.jsxs("div",{className:"relative flex-grow overflow-auto max-h-24",children:[e.jsx("textarea",{placeholder:"Type your question..",className:"w-full p-3 bg-gray-900 border border-gray-700 rounded-xl text-white outline-none shadow-md resize-none",value:f,onChange:k,autoFocus:!0}),f&&e.jsx("button",{type:"button",className:"absolute top-1 right-2 text-gray-500",onClick:N,children:e.jsx(J,{})})]}),e.jsx("button",{type:"submit",className:"ml-4 bg-gray-900 text-white p-3 rounded-full shadow-md",children:e.jsx(q,{})})]})]})]})}U.createRoot(document.getElementById("root")).render(e.jsx(_.StrictMode,{children:e.jsx(G,{})}));
