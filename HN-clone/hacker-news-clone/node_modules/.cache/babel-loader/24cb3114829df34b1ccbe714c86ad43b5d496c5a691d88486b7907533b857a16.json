{"ast":null,"code":"import _regeneratorRuntime from\"/home/sid/Desktop/React-lab/ReactJS-lab/HN-clone/hacker-news-clone/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/sid/Desktop/React-lab/ReactJS-lab/HN-clone/hacker-news-clone/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/sid/Desktop/React-lab/ReactJS-lab/HN-clone/hacker-news-clone/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{Link}from\"react-router-dom\";import Loading from\"./loading\";import Story from\"./story\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Stories=function Stories(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),stories=_useState2[0],setStories=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];useEffect(function(){var cachedData=localStorage.getItem(\"stories\");if(cachedData){setStories(JSON.parse(cachedData));setLoading(false);}else{fetch(\"https://hacker-news.firebaseio.com/v0/topstories.json\").then(function(response){return response.json();}).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(data){var storyPromises,storyData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:storyPromises=data.slice(0,100).map(function(storyId){return fetch(\"https://hacker-news.firebaseio.com/v0/item/\".concat(storyId,\".json\")).then(function(res){return res.json();});});_context.next=3;return Promise.all(storyPromises);case 3:storyData=_context.sent;console.log(storyData);setStories(storyData);setLoading(false);localStorage.setItem(\"stories\",JSON.stringify(storyData));case 8:case\"end\":return _context.stop();}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());}},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[loading&&/*#__PURE__*/_jsx(Loading,{}),/*#__PURE__*/_jsx(\"ol\",{className:\"news\",children:stories.map(function(story){return/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{className:\"link\",to:\"/comments/\".concat(story.id),children:/*#__PURE__*/_jsx(Story,{props:story})})},story.id);})})]});};export default Stories;","map":{"version":3,"names":["React","useState","useEffect","Link","Loading","Story","Stories","stories","setStories","loading","setLoading","cachedData","localStorage","getItem","JSON","parse","fetch","then","response","json","data","storyPromises","slice","map","storyId","res","Promise","all","storyData","console","log","setItem","stringify","story","id"],"sources":["/home/sid/Desktop/React-lab/ReactJS-lab/HN-clone/hacker-news-clone/src/stories.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport Loading from \"./loading\";\nimport Story from \"./story\";\n\nconst Stories = () => {\n  const [stories, setStories] = useState([]);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    const cachedData = localStorage.getItem(\"stories\");\n    if (cachedData) {\n      setStories(JSON.parse(cachedData));\n      setLoading(false);\n    } else {\n      fetch(\"https://hacker-news.firebaseio.com/v0/topstories.json\")\n        .then((response) => response.json())\n        .then(async (data) => {\n          const storyPromises = data\n            .slice(0, 100)\n            .map((storyId) =>\n              fetch(\n                `https://hacker-news.firebaseio.com/v0/item/${storyId}.json`\n              ).then((res) => res.json())\n            );\n          const storyData = await Promise.all(storyPromises);\n\n          console.log(storyData);\n          setStories(storyData);\n          setLoading(false);\n          localStorage.setItem(\"stories\", JSON.stringify(storyData));\n        });\n    }\n  }, []);\n\n  return (\n    <div>\n      {loading && <Loading />}\n      <ol className=\"news\">\n        {stories.map((story) => (\n          <li key={story.id}>\n            <Link className=\"link\" to={`/comments/${story.id}`}>\n              <Story props={story} />\n            </Link>\n          </li>\n        ))}\n      </ol>\n    </div>\n  );\n};\n\nexport default Stories;\n"],"mappings":"wdAAA,MAAOA,MAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,IAAI,KAAQ,kBAAkB,CACvC,MAAOC,QAAO,KAAM,WAAW,CAC/B,MAAOC,MAAK,KAAM,SAAS,CAAC,wFAE5B,GAAMC,QAAO,CAAG,QAAVA,QAAO,EAAS,CACpB,cAA8BL,QAAQ,CAAC,EAAE,CAAC,wCAAnCM,OAAO,eAAEC,UAAU,eAC1B,eAA8BP,QAAQ,CAAC,IAAI,CAAC,yCAArCQ,OAAO,eAAEC,UAAU,eAC1BR,SAAS,CAAC,UAAM,CACd,GAAMS,WAAU,CAAGC,YAAY,CAACC,OAAO,CAAC,SAAS,CAAC,CAClD,GAAIF,UAAU,CAAE,CACdH,UAAU,CAACM,IAAI,CAACC,KAAK,CAACJ,UAAU,CAAC,CAAC,CAClCD,UAAU,CAAC,KAAK,CAAC,CACnB,CAAC,IAAM,CACLM,KAAK,CAAC,uDAAuD,CAAC,CAC3DC,IAAI,CAAC,SAACC,QAAQ,QAAKA,SAAQ,CAACC,IAAI,EAAE,GAAC,CACnCF,IAAI,4FAAC,iBAAOG,IAAI,+IACTC,aAAa,CAAGD,IAAI,CACvBE,KAAK,CAAC,CAAC,CAAE,GAAG,CAAC,CACbC,GAAG,CAAC,SAACC,OAAO,QACXR,MAAK,sDAC2CQ,OAAO,UACtD,CAACP,IAAI,CAAC,SAACQ,GAAG,QAAKA,IAAG,CAACN,IAAI,EAAE,GAAC,GAC5B,uBACqBO,QAAO,CAACC,GAAG,CAACN,aAAa,CAAC,QAA5CO,SAAS,eAEfC,OAAO,CAACC,GAAG,CAACF,SAAS,CAAC,CACtBpB,UAAU,CAACoB,SAAS,CAAC,CACrBlB,UAAU,CAAC,KAAK,CAAC,CACjBE,YAAY,CAACmB,OAAO,CAAC,SAAS,CAAEjB,IAAI,CAACkB,SAAS,CAACJ,SAAS,CAAC,CAAC,CAAC,qDAC5D,+DAAC,CACN,CACF,CAAC,CAAE,EAAE,CAAC,CAEN,mBACE,uBACGnB,OAAO,eAAI,KAAC,OAAO,IAAG,cACvB,WAAI,SAAS,CAAC,MAAM,UACjBF,OAAO,CAACgB,GAAG,CAAC,SAACU,KAAK,qBACjB,iCACE,KAAC,IAAI,EAAC,SAAS,CAAC,MAAM,CAAC,EAAE,qBAAeA,KAAK,CAACC,EAAE,CAAG,uBACjD,KAAC,KAAK,EAAC,KAAK,CAAED,KAAM,EAAG,EAClB,EAHAA,KAAK,CAACC,EAAE,CAIZ,EACN,CAAC,EACC,GACD,CAEV,CAAC,CAED,cAAe5B,QAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}