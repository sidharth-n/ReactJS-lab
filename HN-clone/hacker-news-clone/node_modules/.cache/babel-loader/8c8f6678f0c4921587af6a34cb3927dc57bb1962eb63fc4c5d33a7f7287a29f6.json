{"ast":null,"code":"import _regeneratorRuntime from\"/home/sid/Desktop/React-lab/ReactJS-lab/HN-clone/hacker-news-clone/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/sid/Desktop/React-lab/ReactJS-lab/HN-clone/hacker-news-clone/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/sid/Desktop/React-lab/ReactJS-lab/HN-clone/hacker-news-clone/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useParams}from\"react-router-dom\";import{useState,useEffect}from\"react\";import Loading from\"./loading\";import Story from\"./story\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Comments(_ref){var idKids=_ref.idKids;var _useState=useState(true),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useParams=useParams(),idc=_useParams.idc;console.log(\"idKids is : \"+idKids);var id;if(idKids==undefined){id=idc;}else{id=idKids;}console.log(\"id is :\"+id);function hoursPassed(timestamp){var now=Date.now()/1000;// current time in Unix timestamp (in seconds)\nvar difference=now-timestamp;// difference in seconds\nvar hours=difference/3600;// convert to hours\nreturn Math.floor(hours);}var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),comments=_useState4[0],setComments=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),story=_useState6[0],setStory=_useState6[1];useEffect(function(){fetch(\"https://hacker-news.firebaseio.com/v0/item/\".concat(id,\".json\")).then(function(response){return response.json();}).then(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(data){var storyPromises,CommentData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setStory(data);storyPromises=data.kids.map(function(storyId){return fetch(\"https://hacker-news.firebaseio.com/v0/item/\".concat(storyId,\".json\")).then(function(res){return res.json();});});_context.next=4;return Promise.all(storyPromises);case 4:CommentData=_context.sent;setComments(CommentData);console.log(CommentData);setLoading(false);case 8:case\"end\":return _context.stop();}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}());},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"comment-div\",children:[/*#__PURE__*/_jsx(Story,{props:story}),/*#__PURE__*/_jsx(\"input\",{className:\"comment-input\",type:\"text\"}),/*#__PURE__*/_jsx(\"button\",{className:\"comment-btn\",children:\"add comment\"}),loading&&/*#__PURE__*/_jsx(Loading,{}),/*#__PURE__*/_jsx(\"ul\",{className:\"comments-section\",children:comments.map(function(comment){return/*#__PURE__*/_jsxs(\"li\",{className:\"comments\",style:{marginLeft:\"40px\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"comment-head\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"t-up\",xmlns:\"http://www.w3.org/2000/svg\",width:\"9\",height:\"9\",viewBox:\"0 0 24 24\",fill:\"grey\",stroke:\"grey\",\"stroke-width\":\"2\",\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\",children:/*#__PURE__*/_jsx(\"path\",{d:\"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z\"})}),comment.by,\" \",hoursPassed(comment.time),hoursPassed(comment.time)==1?\" hour \":\" hours \",\" ago | root | parent | next\"]}),/*#__PURE__*/_jsx(\"div\",{dangerouslySetInnerHTML:{__html:comment.text}})]},comment.id);})})]});}","map":{"version":3,"names":["useParams","useState","useEffect","Loading","Story","Comments","idKids","loading","setLoading","idc","console","log","id","undefined","hoursPassed","timestamp","now","Date","difference","hours","Math","floor","comments","setComments","story","setStory","fetch","then","response","json","data","storyPromises","kids","map","storyId","res","Promise","all","CommentData","comment","marginLeft","by","time","__html","text"],"sources":["/home/sid/Desktop/React-lab/ReactJS-lab/HN-clone/hacker-news-clone/src/comments.js"],"sourcesContent":["import { useParams } from \"react-router-dom\";\nimport { useState, useEffect } from \"react\";\nimport Loading from \"./loading\";\nimport Story from \"./story\";\n\nexport default function Comments({ idKids }) {\n  const [loading, setLoading] = useState(true);\n  const { idc } = useParams();\n  console.log(\"idKids is : \" + idKids);\n  let id;\n  if (idKids == undefined) {\n    id = idc;\n  } else {\n    id = idKids;\n  }\n  console.log(\"id is :\" + id);\n  function hoursPassed(timestamp) {\n    const now = Date.now() / 1000; // current time in Unix timestamp (in seconds)\n    const difference = now - timestamp; // difference in seconds\n    const hours = difference / 3600; // convert to hours\n    return Math.floor(hours);\n  }\n  const [comments, setComments] = useState([]);\n  const [story, setStory] = useState([]);\n  useEffect(() => {\n    fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`)\n      .then((response) => response.json())\n      .then(async (data) => {\n        setStory(data);\n        const storyPromises = data.kids.map((storyId) =>\n          fetch(\n            `https://hacker-news.firebaseio.com/v0/item/${storyId}.json`\n          ).then((res) => res.json())\n        );\n        const CommentData = await Promise.all(storyPromises);\n        setComments(CommentData);\n        console.log(CommentData);\n        setLoading(false);\n      });\n  }, []);\n  return (\n    <div className=\"comment-div\">\n      <Story props={story} />\n      <input className=\"comment-input\" type=\"text\"></input>\n      <button className=\"comment-btn\">add comment</button>\n      {loading && <Loading />}\n      <ul className=\"comments-section\">\n        {comments.map((comment) => (\n          <li\n            className=\"comments\"\n            key={comment.id}\n            style={{ marginLeft: \"40px\" }}\n          >\n            <div className=\"comment-head\">\n              <svg\n                className=\"t-up\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"9\"\n                height=\"9\"\n                viewBox=\"0 0 24 24\"\n                fill=\"grey\"\n                stroke=\"grey\"\n                stroke-width=\"2\"\n                stroke-linecap=\"round\"\n                stroke-linejoin=\"round\"\n              >\n                <path d=\"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z\"></path>\n              </svg>\n              {comment.by} {hoursPassed(comment.time)}\n              {hoursPassed(comment.time) == 1 ? \" hour \" : \" hours \"} ago | root\n              | parent | next\n            </div>\n            <div dangerouslySetInnerHTML={{ __html: comment.text }} />\n            {/*  {comment.kids && comment.kids.map((kid) => <Comments id={kid} />)} */}\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n}\n"],"mappings":"wdAAA,OAASA,SAAS,KAAQ,kBAAkB,CAC5C,OAASC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,MAAOC,QAAO,KAAM,WAAW,CAC/B,MAAOC,MAAK,KAAM,SAAS,CAAC,wFAE5B,cAAe,SAASC,SAAQ,MAAa,IAAVC,OAAM,MAANA,MAAM,CACvC,cAA8BL,QAAQ,CAAC,IAAI,CAAC,wCAArCM,OAAO,eAAEC,UAAU,eAC1B,eAAgBR,SAAS,EAAE,CAAnBS,GAAG,YAAHA,GAAG,CACXC,OAAO,CAACC,GAAG,CAAC,cAAc,CAAGL,MAAM,CAAC,CACpC,GAAIM,GAAE,CACN,GAAIN,MAAM,EAAIO,SAAS,CAAE,CACvBD,EAAE,CAAGH,GAAG,CACV,CAAC,IAAM,CACLG,EAAE,CAAGN,MAAM,CACb,CACAI,OAAO,CAACC,GAAG,CAAC,SAAS,CAAGC,EAAE,CAAC,CAC3B,QAASE,YAAW,CAACC,SAAS,CAAE,CAC9B,GAAMC,IAAG,CAAGC,IAAI,CAACD,GAAG,EAAE,CAAG,IAAI,CAAE;AAC/B,GAAME,WAAU,CAAGF,GAAG,CAAGD,SAAS,CAAE;AACpC,GAAMI,MAAK,CAAGD,UAAU,CAAG,IAAI,CAAE;AACjC,MAAOE,KAAI,CAACC,KAAK,CAACF,KAAK,CAAC,CAC1B,CACA,eAAgClB,QAAQ,CAAC,EAAE,CAAC,yCAArCqB,QAAQ,eAAEC,WAAW,eAC5B,eAA0BtB,QAAQ,CAAC,EAAE,CAAC,yCAA/BuB,KAAK,eAAEC,QAAQ,eACtBvB,SAAS,CAAC,UAAM,CACdwB,KAAK,sDAA+Cd,EAAE,UAAQ,CAC3De,IAAI,CAAC,SAACC,QAAQ,QAAKA,SAAQ,CAACC,IAAI,EAAE,GAAC,CACnCF,IAAI,6FAAC,iBAAOG,IAAI,iJACfL,QAAQ,CAACK,IAAI,CAAC,CACRC,aAAa,CAAGD,IAAI,CAACE,IAAI,CAACC,GAAG,CAAC,SAACC,OAAO,QAC1CR,MAAK,sDAC2CQ,OAAO,UACtD,CAACP,IAAI,CAAC,SAACQ,GAAG,QAAKA,IAAG,CAACN,IAAI,EAAE,GAAC,GAC5B,uBACyBO,QAAO,CAACC,GAAG,CAACN,aAAa,CAAC,QAA9CO,WAAW,eACjBf,WAAW,CAACe,WAAW,CAAC,CACxB5B,OAAO,CAACC,GAAG,CAAC2B,WAAW,CAAC,CACxB9B,UAAU,CAAC,KAAK,CAAC,CAAC,qDACnB,gEAAC,CACN,CAAC,CAAE,EAAE,CAAC,CACN,mBACE,aAAK,SAAS,CAAC,aAAa,wBAC1B,KAAC,KAAK,EAAC,KAAK,CAAEgB,KAAM,EAAG,cACvB,cAAO,SAAS,CAAC,eAAe,CAAC,IAAI,CAAC,MAAM,EAAS,cACrD,eAAQ,SAAS,CAAC,aAAa,UAAC,aAAW,EAAS,CACnDjB,OAAO,eAAI,KAAC,OAAO,IAAG,cACvB,WAAI,SAAS,CAAC,kBAAkB,UAC7Be,QAAQ,CAACW,GAAG,CAAC,SAACM,OAAO,qBACpB,YACE,SAAS,CAAC,UAAU,CAEpB,KAAK,CAAE,CAAEC,UAAU,CAAE,MAAO,CAAE,wBAE9B,aAAK,SAAS,CAAC,cAAc,wBAC3B,YACE,SAAS,CAAC,MAAM,CAChB,KAAK,CAAC,4BAA4B,CAClC,KAAK,CAAC,GAAG,CACT,MAAM,CAAC,GAAG,CACV,OAAO,CAAC,WAAW,CACnB,IAAI,CAAC,MAAM,CACX,MAAM,CAAC,MAAM,CACb,eAAa,GAAG,CAChB,iBAAe,OAAO,CACtB,kBAAgB,OAAO,uBAEvB,aAAM,CAAC,CAAC,2EAA2E,EAAQ,EACvF,CACLD,OAAO,CAACE,EAAE,CAAC,GAAC,CAAC3B,WAAW,CAACyB,OAAO,CAACG,IAAI,CAAC,CACtC5B,WAAW,CAACyB,OAAO,CAACG,IAAI,CAAC,EAAI,CAAC,CAAG,QAAQ,CAAG,SAAS,CAAC,6BAEzD,GAAM,cACN,YAAK,uBAAuB,CAAE,CAAEC,MAAM,CAAEJ,OAAO,CAACK,IAAK,CAAE,EAAG,GAtBrDL,OAAO,CAAC3B,EAAE,CAwBZ,EACN,CAAC,EACC,GACD,CAEV"},"metadata":{},"sourceType":"module","externalDependencies":[]}