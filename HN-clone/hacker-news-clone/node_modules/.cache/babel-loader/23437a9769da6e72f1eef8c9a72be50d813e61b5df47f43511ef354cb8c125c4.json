{"ast":null,"code":"import _toConsumableArray from\"/home/sid/Desktop/React-lab/ReactJS-lab/HN-clone/hacker-news-clone/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"/home/sid/Desktop/React-lab/ReactJS-lab/HN-clone/hacker-news-clone/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/sid/Desktop/React-lab/ReactJS-lab/HN-clone/hacker-news-clone/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/sid/Desktop/React-lab/ReactJS-lab/HN-clone/hacker-news-clone/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useParams}from\"react-router-dom\";import{useState,useEffect}from\"react\";import Loading from\"./loading\";import Story from\"./story\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Comments(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),story=_useState2[0],setStory=_useState2[1];var _useParams=useParams(),id=_useParams.id;useEffect(function(){fetch(\"https://hacker-news.firebaseio.com/v0/item/\".concat(id,\".json\")).then(function(response){return response.json();}).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(data){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:console.log(data);setStory(data);case 2:case\"end\":return _context.stop();}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"comments-page\",children:[/*#__PURE__*/_jsx(Story,{props:story}),/*#__PURE__*/_jsx(\"input\",{className:\"comment-input\",type:\"text\"}),/*#__PURE__*/_jsx(\"button\",{className:\"comment-btn\",children:\"add comment\"}),/*#__PURE__*/_jsx(\"div\",{className:\"comments-container\",children:/*#__PURE__*/_jsx(Commentscall,{id:id})})]});}function Commentscall(_ref2){var id=_ref2.id;var CommentData;var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];/* console.log(\"id is :\" + id); */var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),comments=_useState6[0],setComments=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),story=_useState8[0],setStory=_useState8[1];useEffect(function(){fetch(\"https://hacker-news.firebaseio.com/v0/item/\".concat(id,\".json\")).then(function(response){return response.json();}).then(/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(data){var storyPromises;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:console.log(data);setStory(data);if(!data.kids){_context2.next=10;break;}storyPromises=data.kids.map(function(storyId){return fetch(\"https://hacker-news.firebaseio.com/v0/item/\".concat(storyId,\".json\")).then(function(res){return res.json();});});_context2.next=6;return Promise.all(storyPromises);case 6:CommentData=_context2.sent;console.log(CommentData);_context2.next=12;break;case 10:CommentData=_toConsumableArray(story);console.log(story);case 12:setComments(CommentData);/*  console.log(CommentData); */setLoading(false);case 14:case\"end\":return _context2.stop();}},_callee2);}));return function(_x2){return _ref3.apply(this,arguments);};}());},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"comment-div\",children:[story.text&&/*#__PURE__*/_jsx(CommentStyle,{comment:story}),/*#__PURE__*/_jsx(\"ul\",{className:\"comments-section\",children:comments.map(function(comment){return/*#__PURE__*/_jsxs(_Fragment,{children:[comment.text&&/*#__PURE__*/_jsx(CommentStyle,{comment:comment}),comment.kids&&comment.kids.map(function(kid){return/*#__PURE__*/_jsx(Commentscall,{id:kid});})]});})})]});}function CommentStyle(_ref4){var comment=_ref4.comment;var _useState9=useState(40),_useState10=_slicedToArray(_useState9,2),margin=_useState10[0],setMargin=_useState10[1];/* setMargin(margin + 20); */function hoursPassed(timestamp){var now=Date.now()/1000;// current time in Unix timestamp (in seconds)\nvar difference=now-timestamp;// difference in seconds\nvar hours=difference/3600;// convert to hours\nreturn Math.floor(hours);}return/*#__PURE__*/_jsxs(\"li\",{style:{marginLeft:\"\".concat(margin,\"px\")},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"comment-head\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"t-up\",xmlns:\"http://www.w3.org/2000/svg\",width:\"9\",height:\"9\",viewBox:\"0 0 24 24\",fill:\"grey\",stroke:\"grey\",\"stroke-width\":\"2\",\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\",children:/*#__PURE__*/_jsx(\"path\",{d:\"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z\"})}),comment.by,\" \",hoursPassed(comment.time),hoursPassed(comment.time)==1?\" hour \":\" hours \",\" ago | root | parent | next | existing : \",comment.dead,\" \",console.log(margin)]}),/*#__PURE__*/_jsx(\"div\",{dangerouslySetInnerHTML:{__html:comment.text}})]},comment.id);}","map":{"version":3,"names":["useParams","useState","useEffect","Loading","Story","Comments","story","setStory","id","fetch","then","response","json","data","console","log","Commentscall","CommentData","loading","setLoading","comments","setComments","kids","storyPromises","map","storyId","res","Promise","all","text","comment","kid","CommentStyle","margin","setMargin","hoursPassed","timestamp","now","Date","difference","hours","Math","floor","marginLeft","by","time","dead","__html"],"sources":["/home/sid/Desktop/React-lab/ReactJS-lab/HN-clone/hacker-news-clone/src/comments.js"],"sourcesContent":["import { useParams } from \"react-router-dom\";\nimport { useState, useEffect } from \"react\";\nimport Loading from \"./loading\";\nimport Story from \"./story\";\n\nexport default function Comments() {\n  const [story, setStory] = useState([]);\n  const { id } = useParams();\n  useEffect(() => {\n    fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`)\n      .then((response) => response.json())\n      .then(async (data) => {\n        console.log(data);\n        setStory(data);\n      });\n  }, []);\n  return (\n    <div className=\"comments-page\">\n      <Story props={story} />\n      <input className=\"comment-input\" type=\"text\"></input>\n      <button className=\"comment-btn\">add comment</button>\n      <div className=\"comments-container\">\n        <Commentscall id={id} />\n      </div>\n    </div>\n  );\n}\n\nfunction Commentscall({ id }) {\n  let CommentData;\n  const [loading, setLoading] = useState(true);\n  /* console.log(\"id is :\" + id); */\n  const [comments, setComments] = useState([]);\n  const [story, setStory] = useState([]);\n  useEffect(() => {\n    fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`)\n      .then((response) => response.json())\n      .then(async (data) => {\n        console.log(data);\n        setStory(data);\n        if (data.kids) {\n          const storyPromises = data.kids.map((storyId) =>\n            fetch(\n              `https://hacker-news.firebaseio.com/v0/item/${storyId}.json`\n            ).then((res) => res.json())\n          );\n          CommentData = await Promise.all(storyPromises);\n          console.log(CommentData);\n        } else {\n          CommentData = [...story];\n          console.log(story);\n        }\n        setComments(CommentData);\n        /*  console.log(CommentData); */\n        setLoading(false);\n      });\n  }, []);\n  return (\n    <div className=\"comment-div\">\n      {story.text && <CommentStyle comment={story} />}\n      <ul className=\"comments-section\">\n        {comments.map((comment) => (\n          <>\n            {comment.text && <CommentStyle comment={comment} />}\n            {comment.kids &&\n              comment.kids.map((kid) => <Commentscall id={kid} />)}\n          </>\n        ))}\n      </ul>\n    </div>\n  );\n}\n\nfunction CommentStyle({ comment }) {\n  const [margin, setMargin] = useState(40);\n  /* setMargin(margin + 20); */\n  function hoursPassed(timestamp) {\n    const now = Date.now() / 1000; // current time in Unix timestamp (in seconds)\n    const difference = now - timestamp; // difference in seconds\n    const hours = difference / 3600; // convert to hours\n    return Math.floor(hours);\n  }\n  return (\n    <li\n      /* className=\"comments\" */\n      key={comment.id}\n      style={{ marginLeft: `${margin}px` }}\n    >\n      <div className=\"comment-head\">\n        <svg\n          className=\"t-up\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          width=\"9\"\n          height=\"9\"\n          viewBox=\"0 0 24 24\"\n          fill=\"grey\"\n          stroke=\"grey\"\n          stroke-width=\"2\"\n          stroke-linecap=\"round\"\n          stroke-linejoin=\"round\"\n        >\n          <path d=\"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z\"></path>\n        </svg>\n        {comment.by} {hoursPassed(comment.time)}\n        {hoursPassed(comment.time) == 1 ? \" hour \" : \" hours \"} ago | root |\n        parent | next | existing : {comment.dead} {console.log(margin)}\n      </div>\n      <div dangerouslySetInnerHTML={{ __html: comment.text }} />\n    </li>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}